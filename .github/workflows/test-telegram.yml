name: Test Telegram Notification

on:
  workflow_dispatch:

jobs:
  test-notification:
    runs-on: ubuntu-latest
    steps:
      - name: Send Test Notification
        env:
          TG_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TELEGRAM_TO }}
          VERSION_NAME: "Test-Version-1.0"
          REPO: ${{ github.repository }}
        run: |
          # ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²å¹¶é…åˆ --data-urlencode è‡ªåŠ¨å¤„ç†ç‰¹æ®Šå­—ç¬¦å’Œæ¢è¡Œ
          MSG="ğŸ”” *EveryTalk é€šçŸ¥æµ‹è¯•*

          è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œç”¨äºéªŒè¯ GitHub Actions é€šçŸ¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚
          å¦‚æœä¸éœ€ç¼–è¯‘ APK å°±èƒ½æ”¶åˆ°è¿™æ¡æ¶ˆæ¯ï¼Œè¯´æ˜é…ç½®å·²ä¿®å¤æˆåŠŸã€‚

          ğŸ“¦ *æ¨¡æ‹Ÿç‰ˆæœ¬*: \`$VERSION_NAME\`
          
          #Test #EveryTalk"

          curl -v -X POST "https://api.telegram.org/bot$TG_TOKEN/sendMessage" \
            -d "chat_id=$TG_CHAT_ID" \
            -d "parse_mode=Markdown" \
            --data-urlencode "text=$MSG"